(()=>{"use strict";Math.PI;function e(e,t){e.canvas.width=window.innerWidth,e.canvas.height=window.innerHeight,t.scale=Math.min(e.canvas.width/t.gameWidth,e.canvas.height/t.gameHeight),e.scale(t.scale,t.scale),t.offsetX=Math.floor((e.canvas.width/t.scale-t.gameWidth)/2),t.offsetY=Math.floor((e.canvas.height/t.scale-t.gameHeight)/2),e.translate(t.offsetX,t.offsetY),t.screenStartX=-t.offsetX,t.screenStartY=-t.offsetY,t.screenEndX=2*t.offsetX+t.gameWidth,t.screenEndY=2*t.offsetY+t.gameHeight}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}function n(e){var i=function(e,i){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,i||"default");if("object"!=t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==t(i)?i:i+""}var a,o,r,c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.shapes=[],this.state={}},(t=[{key:"addShape",value:function(e){this.shapes.push(e)}},{key:"removeShape",value:function(e){var t=this.shapes.findIndex(function(t){return t.config.name&&t.config.name===e});-1!==t&&this.shapes.splice(t,1)}},{key:"update",value:function(e){this.shapes.forEach(function(t){t.update(e)}),this.shapes=this.shapes.filter(function(e){return!e.config.ttl||e.lifetime<e.config.ttl})}},{key:"draw",value:function(e){this.shapes.length&&(e.save(),e.translate(this.config.x,this.config.y),this.shapes.forEach(function(t){t.draw(e)}),e.restore())}},{key:"checkCollision",value:function(e,t){return!!this.config.outline&&e>=this.config.x-this.config.outline.left&&e<=this.config.x+this.config.outline.right&&t>=this.config.y-this.config.outline.top&&t<=this.config.y+this.config.outline.bottom}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function f(e,t,i){return(t=g(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function g(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}a=c,r={BOARD:1,BUTTON:2,TEXT:3,ILLUSTRATION:4},(o=n(o="VARIANT"))in a?Object.defineProperty(a,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[o]=r;var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={},this.config.duration=t.duration||1e3,this.config.loop=t.loop||0,this.config.direction=t.direction||e.FORWARD,this.config.startDelay=t.startDelay||0,this.progress=0,this.lifetime=0,this.loopCount=1}return function(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,[{key:"updateProgress",value:function(t){this.progress+=t,this.lifetime+=t,this.lifetime<this.config.startDelay&&(this.progress=0),this.progress>this.config.duration&&(this.config.loop===e.INFINITE||this.loopCount<this.config.loop)&&(this.loopCount++,this.progress=this.progress%this.config.duration),this.progress>this.config.duration&&0===this.config.loop&&(this.progress=this.config.duration)}},{key:"getProgress",value:function(){return this.progress/this.config.duration}}])}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}f(h,"INFINITE",-1),f(h,"FORWARD",1),f(h,"BACKWARD",2);var m=function(){return function(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.config=i,this.animation=null,this.lifetime=0},[{key:"addAnimation",value:function(e){this.animation=e}},{key:"update",value:function(e){this.lifetime+=e,this.animation&&this.animation.updateProgress(e)}},{key:"draw",value:function(e){e.strokeStyle=this.config.color||"red",e.lineWidth=this.config.lineWidth||2,e.save(),e.translate(this.config.x,this.config.y);var t=1,i=h.FORWARD;switch(this.animation&&(t=this.animation.getProgress(),i=this.animation.config.direction),this.type){case"rectangle":e.beginPath(),i===h.FORWARD?e.rect(0,0,this.config.width*t,this.config.height*t):e.rect(this.config.width*(1-t),this.config.height*(1-t),this.config.width*t,this.config.height*t),e.stroke(),this.config.fillColor&&(e.fillStyle=this.config.fillColor,e.fill());break;case"circle":this.config.lineWidth&&(e.lineWidth=this.config.lineWidth),e.beginPath(),i===h.FORWARD?e.arc(0,0,this.config.radius,0,2*Math.PI*t,!1):(1===t&&(t=0),e.arc(0,0,this.config.radius,2*Math.PI*t,0,!1)),e.stroke();break;case"line":this.config.lineWidth&&(e.lineWidth=this.config.lineWidth),e.beginPath(),e.moveTo(0,0),e.lineTo((this.config.x2-this.config.x)*t,(this.config.y2-this.config.y)*t),e.stroke();break;case"polygon":if(!this.config.points||this.config.points.length<2)break;e.beginPath(),e.moveTo(this.config.points[0].x,this.config.points[0].y),this.config.points.forEach(function(t,i){e.lineTo(t.x,t.y)}),e.closePath(),e.stroke(),this.config.fillColor&&(e.fillStyle=this.config.fillColor,e.fill());break;case"text":e.font=this.config.font||"20px Arial",e.fillStyle=this.config.color||"black",e.textAlign=this.config.align||"left",e.textBaseline=this.config.baseline||"alphabetic",e.fillText(this.config.text||"",0,0);break;default:console.warn("GameShape::draw - Unknown shape type: ".concat(this.type))}e.restore()}}])}();function y(){return new m("line",{x:-20,y:17,x2:20,y2:17,color:"red",lineWidth:5,name:"selected_indicator"})}function b(e){e.gameObjects.gameplay=e.gameObjects.gameplay.filter(function(e){return"turn_symbol"!==e.config.name});var t=new c({variant:c.VARIANT.ILLUSTRATION,x:165,y:30,name:"turn_symbol"});1==e.state.currentPlayer?(t.addShape(new m("line",{x:-15,y:-15,x2:15,y2:15,color:"rgba(40, 151, 255, 1)",lineWidth:4})),t.addShape(new m("line",{x:15,y:-15,x2:-15,y2:15,color:"rgba(40, 151, 255, 1)",lineWidth:4}))):t.addShape(new m("circle",{x:0,y:0,radius:15,color:"rgba(248, 66, 66, 1)",lineWidth:4})),e.gameObjects.gameplay.push(t)}function v(e,t){var i=w(e,t,1,0);if(i)return i;var n=w(e,t,1,1);if(n)return n;var a=w(e,t,0,1);if(a)return a;var o=w(e,t,-1,1);return o||!1}function w(e,t,i,n){for(var a=t.config.location,o={x:null,y:null,x2:null,y2:null},r=t.config.location.x,c=t.config.location.y;r>=0&&c>=0&&r<e.config.boardSize&&c<e.config.boardSize&&e.gameFields[r][c].state&&e.gameFields[r][c].state.occupiedBy==t.state.occupiedBy;)a=e.gameFields[r][c].config.location,o.x=e.gameFields[r][c].config.x,o.y=e.gameFields[r][c].config.y,r-=i,c-=n;var l=0;for(r=a.x,c=a.y;r<e.config.boardSize&&c<e.config.boardSize&&r>=0&&c>=0&&e.gameFields[r][c].state&&e.gameFields[r][c].state.occupiedBy==t.state.occupiedBy;){if(++l>=e.state.winLength)return o.x2=e.gameFields[r][c].config.x,o.y2=e.gameFields[r][c].config.y,o;r+=i,c+=n}return!1}function x(e){var t=Math.pow(e.state.boardSize,2);return e.state.occupiedSpaces>=t}function S(e,t){var i=new c({variant:c.VARIANT.ILLUSTRATION,x:0,y:0,name:"win_line"}),n=new m("line",{x:t.x,y:t.y,x2:t.x2,y2:t.y2,color:"red",lineWidth:15});n.addAnimation(new h({duration:300})),i.addShape(n),e.gameObjects.gameplay.push(i)}function T(e,t){var i=new c({variant:c.VARIANT.ILLUSTRATION,x:e.displayData.gameWidth/2,y:32,name:"gameover_text"});i.addShape(new m("text",{x:0,y:0,text:t,font:"48px Consolas",color:"red",align:"center",baseline:"middle"})),e.gameObjects.gameplay.push(i)}function A(e,t){var i=new m("circle",{x:0,y:0,radius:e.config.cellWidth/2-e.config.cellPadding,color:"rgba(248, 66, 66, 1)",lineWidth:4});i.addAnimation(new h({duration:300})),t.addShape(i)}function O(e,t){e.gameObjects[j.GAMEPLAY].forEach(function(i){if(0==e.state.gameOver&&i.config.variant==c.VARIANT.BOARD&&i.checkCollision(t.x,t.y)&&null==i.state.occupiedBy){switch(i.state.occupiedBy=e.state.currentPlayer,e.state.occupiedSpaces++,e.state.currentPlayer){case 1:!function(e,t){var i=new m("line",{x:e.config.cellPadding-e.config.cellWidth/2,y:e.config.cellPadding-e.config.cellHeight/2,x2:e.config.cellWidth/2-e.config.cellPadding,y2:e.config.cellHeight/2-e.config.cellPadding,color:"rgba(40, 151, 255, 1)",lineWidth:4});i.addAnimation(new h({duration:150,direction:h.BACKWARD})),t.addShape(i);var n=new m("line",{x:e.config.cellPadding-e.config.cellWidth/2,y:e.config.cellHeight/2-e.config.cellPadding,x2:e.config.cellWidth/2-e.config.cellPadding,y2:-e.config.cellHeight/2+e.config.cellPadding,color:"rgba(40, 151, 255, 1)",lineWidth:4});n.addAnimation(new h({duration:150,startDelay:150})),t.addShape(n)}(e,i),e.state.currentPlayer=2;break;case 2:A(e,i),e.state.currentPlayer=1}var n=v(e,i);if(n)return S(e,n),e.state.gameOver=!0,void T(e,"Game Over");if(x(e))return e.state.gameOver=!0,void T(e,"Game Over");b(e)}i.config.variant==c.VARIANT.BUTTON&&i.checkCollision(t.x,t.y)&&"menu_button"===i.config.name&&(e.mode=j.PAUSED)})}function N(e,t){e.gameObjects[j.MENU].forEach(function(i){if(i.config.variant==c.VARIANT.BUTTON&&i.checkCollision(t.x,t.y)){if("start_button"===i.config.name&&(e.mode=j.GAMEPLAY,function(e){e.gameObjects.gameplay=e.gameObjects.gameplay.filter(function(e){return"win_line"!=e.config.name}),e.gameObjects.gameplay=e.gameObjects.gameplay.filter(function(e){return"gameover_text"!=e.config.name}),e.gameObjects.gameplay=e.gameObjects.gameplay.filter(function(e){return e.config.variant!==c.VARIANT.BOARD}),e.gameFields=[];for(var t=0;t<e.config.boardSize;t++){for(var i=[],n=0;n<e.config.boardSize;n++){var a=new c({variant:c.VARIANT.BOARD,x:e.config.cellWidth/2+t*e.config.cellWidth+e.config.boardMargin,y:e.config.cellHeight/2+n*e.config.cellHeight+e.config.boardMargin,name:"board_tile",outline:{top:e.config.cellHeight/2,left:e.config.cellWidth/2,bottom:e.config.cellHeight/2,right:e.config.cellWidth/2},location:{x:t,y:n}}),o=new m("rectangle",{x:-e.config.cellWidth/2,y:-e.config.cellHeight/2,width:e.config.cellWidth,height:e.config.cellHeight,color:"gray"});a.addShape(o),e.gameObjects.gameplay.push(a),i.push(a)}e.gameFields.push(i)}if(e.state.gameType===C.BLOCKED)for(var r=e.state.boardSize-2,l=0;l<r;l++)for(;;){var s=Math.floor(Math.random()*e.state.boardSize),f=Math.floor(Math.random()*e.state.boardSize),g=e.gameFields[s][f];if(null==g.state.occupiedBy){g.state.occupiedBy=0,g.addShape(new m("rectangle",{x:-e.config.cellWidth/2+4,y:-e.config.cellHeight/2+4,width:e.config.cellWidth-8,height:e.config.cellHeight-8,color:"black",fillColor:"gray"})),g.addShape(new m("text",{x:0,y:0,text:"blocked",font:"".concat(e.config.cellWidth/8,"px Consolas"),color:"black",align:"center",baseline:"middle"}));break}}}(e),e.resetState()),"size_button"===i.config.name){if(i.config.boardSize===e.state.boardSize)return;e.state.boardSize=i.config.boardSize,e.state.boardSize<e.state.winLength&&(e.state.winLength=e.state.boardSize,P(e)),function(e){var t=e.state.boardSize;e.gameObjects[j.MENU].forEach(function(e){e.config.variant==c.VARIANT.BUTTON&&("size_button"===e.config.name&&e.config.boardSize===t?e.addShape(y()):"size_button"===e.config.name&&e.removeShape("selected_indicator"))})}(e),e.updateConfig()}if("win_length_button"===i.config.name){if(i.config.winLength===e.state.winLength)return;if(i.config.winLength>e.state.boardSize)return;e.state.winLength=i.config.winLength,P(e),e.updateConfig()}"game_type_button"===i.config.name&&(e.state.gameType=i.config.gameType,function(e){var t=e.state.gameType;e.gameObjects[j.MENU].forEach(function(e){e.config.variant==c.VARIANT.BUTTON&&("game_type_button"===e.config.name&&e.config.gameType===t?e.addShape(y()):"game_type_button"===e.config.name&&e.removeShape("selected_indicator"))})}(e)),"player_2_type_button"===i.config.name&&(e.state.opponentType=i.config.opponentType,function(e){var t=e.state.opponentType;e.gameObjects[j.MENU].forEach(function(e){e.config.variant==c.VARIANT.BUTTON&&("player_2_type_button"===e.config.name&&e.config.opponentType===t?e.addShape(y()):"player_2_type_button"===e.config.name&&e.removeShape("selected_indicator"))})}(e))}})}function P(e){var t=e.state.winLength;e.gameObjects[j.MENU].forEach(function(e){e.config.variant==c.VARIANT.BUTTON&&("win_length_button"===e.config.name&&e.config.winLength===t?e.addShape(y()):"win_length_button"===e.config.name&&e.removeShape("selected_indicator"))})}function _(e){e.userInputs.forEach(function(t){if("click"==t.type)switch(e.mode){case j.GAMEPLAY:O(e,t);break;case j.PAUSED:!function(e,t){e.gameObjects[j.PAUSED].forEach(function(i){i.config.variant==c.VARIANT.BUTTON&&i.checkCollision(t.x,t.y)&&"continue_button"===i.config.name&&(e.mode=j.GAMEPLAY),i.config.variant==c.VARIANT.BUTTON&&i.checkCollision(t.x,t.y)&&"stop_button"===i.config.name&&(e.mode=j.MENU)})}(e,t);break;case j.MENU:N(e,t)}}),e.userInputs=[]}function E(e){!function(e){for(;;){var t=Math.floor(Math.random()*e.state.boardSize),i=Math.floor(Math.random()*e.state.boardSize),n=e.gameFields[t][i];if(null==n.state.occupiedBy){n.state.occupiedBy=e.state.currentPlayer,e.state.occupiedSpaces++,A(e,n),e.state.currentPlayer=1;var a=v(e,n);if(a){S(e,a),e.state.gameOver=!0,T(e,"Game Over");break}if(x(e)){e.state.gameOver=!0,T(e,"Game Over");break}b(e);break}}}(e)}function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R(n.key),n)}}function R(e){var t=function(e,t){if("object"!=W(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==W(t)?t:t+""}var j={GAMEPLAY:"gameplay",MENU:"menu",PAUSED:"paused"},C={NORMAL:0,BLOCKED:1},D={HUMAN:0,CPU:1},k=function(){return function(e,t,i){return t&&I(e.prototype,t),i&&I(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}(function t(i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=i,this.ctx=i.getContext("2d"),this.frameData={lastTime:0,deltaTime:0,fps:{accum:0,frames:0,avg:0}},this.displayData={gameWidth:800,gameHeight:800,scale:1,offsetX:0,offsetY:0,screenStartX:0,screenStartY:0,screenEndX:0,screenEndY:0},this.mode=j.MENU,this.gameObjects={gameplay:[],menu:[],paused:[]},this.gameFields=[],this.userInputs=[],function(e){var t=window.devicePixelRatio,i=function(){return+getComputedStyle(e).getPropertyValue("height").slice(0,-2)},n=function(){return+getComputedStyle(e).getPropertyValue("width").slice(0,-2)};e.setAttribute("width",n()*t),e.setAttribute("height",i()*t)}(this.canvas),window.addEventListener("resize",function(){e(n.ctx,n.displayData)}),i.addEventListener("click",function(e){var t=function(e,t,i){var n=i.getBoundingClientRect();return{x:(e.clientX-n.left)/t.scale-t.offsetX,y:(e.clientY-n.top)/t.scale-t.offsetY}}(e,n.displayData,n.canvas);n.userInputs.push({type:"click",x:t.x,y:t.y})}),this.state={gameType:C.NORMAL,opponentType:D.HUMAN,boardSize:3,winLength:3,currentPlayer:1,occupiedSpaces:0,gameOver:!1},this.config={},this.updateConfig(),function(e){var t=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth/2,y:e.displayData.gameHeight/5*4,name:"start_button",outline:{top:60,left:60,bottom:60,right:60}});t.addShape(new m("rectangle",{x:-60,y:-60,width:120,height:120,color:"red"})),t.addShape(new m("polygon",{x:-0,y:-0,points:[{x:-30,y:-40},{x:40,y:0},{x:-30,y:40}],color:"red",fillColor:"red"})),e.gameObjects.menu.push(t);var i=new c({variant:c.VARIANT.TEXT,x:50,y:e.displayData.gameHeight/4*1,name:"size_text"});i.addShape(new m("text",{x:0,y:0,text:"Board Size:",font:"30px Consolas",color:"white",align:"left",baseline:"middle"})),e.gameObjects.menu.push(i);for(var n=3;n<=8;n++){var a=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480+80*(n-3),y:e.displayData.gameHeight/4*1,name:"size_button",outline:{top:30,left:30,bottom:30,right:30},boardSize:n});a.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),a.addShape(new m("text",{x:0,y:0,text:"".concat(n,"x").concat(n),font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),n===e.state.boardSize&&a.addShape(y()),e.gameObjects.menu.push(a)}var o=new c({variant:c.VARIANT.TEXT,x:50,y:e.displayData.gameHeight/4*1+100,name:"win_length_text"});o.addShape(new m("text",{x:0,y:0,text:"Win Length:",font:"30px Consolas",color:"white",align:"left",baseline:"middle"})),e.gameObjects.menu.push(o);for(var r=3;r<=8;r++){var l=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480+80*(r-3),y:e.displayData.gameHeight/4*1+100,name:"win_length_button",outline:{top:30,left:30,bottom:30,right:30},winLength:r});l.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),l.addShape(new m("text",{x:0,y:0,text:"".concat(r),font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),r===e.state.winLength&&l.addShape(y()),e.gameObjects.menu.push(l)}var s=new c({variant:c.VARIANT.TEXT,x:50,y:e.displayData.gameHeight/4*1+200,name:"game_type_text"});s.addShape(new m("text",{x:0,y:0,text:"Game Type:",font:"30px Consolas",color:"white",align:"left",baseline:"middle"})),e.gameObjects.menu.push(s);var f=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480,y:e.displayData.gameHeight/4*1+200,name:"game_type_button",outline:{top:30,left:30,bottom:30,right:30},gameType:C.NORMAL});f.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),f.addShape(new m("text",{x:0,y:0,text:"Nor",font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),f.addShape(y()),e.gameObjects.menu.push(f);var g=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480+80,y:e.displayData.gameHeight/4*1+200,name:"game_type_button",outline:{top:30,left:30,bottom:30,right:30},gameType:C.BLOCKED});g.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),g.addShape(new m("text",{x:0,y:0,text:"Blk",font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),e.gameObjects.menu.push(g);var h=new c({variant:c.VARIANT.TEXT,x:50,y:e.displayData.gameHeight/4*1+300,name:"player_2_type_text"});h.addShape(new m("text",{x:0,y:0,text:"Player 2:",font:"30px Consolas",color:"white",align:"left",baseline:"middle"})),e.gameObjects.menu.push(h);var d=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480,y:e.displayData.gameHeight/4*1+300,name:"player_2_type_button",outline:{top:30,left:30,bottom:30,right:30},opponentType:D.HUMAN});d.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),d.addShape(new m("text",{x:0,y:0,text:"Hum",font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),d.addShape(y()),e.gameObjects.menu.push(d);var u=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-480+80,y:e.displayData.gameHeight/4*1+300,name:"player_2_type_button",outline:{top:30,left:30,bottom:30,right:30},opponentType:D.CPU});u.addShape(new m("rectangle",{x:-30,y:-30,width:60,height:60,color:"gray"})),u.addShape(new m("text",{x:0,y:0,text:"CPU",font:"30px Consolas",color:"white",align:"center",baseline:"middle"})),e.gameObjects.menu.push(u)}(this),function(e){var t=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-30,y:30,name:"menu_button",outline:{top:20,left:20,bottom:20,right:20}});t.addShape(new m("rectangle",{x:-20,y:-20,width:40,height:40,color:"red"})),t.addShape(new m("rectangle",{x:-10,y:-10,width:6,height:20,color:"red",fillColor:"red"})),t.addShape(new m("rectangle",{x:10,y:-10,width:-6,height:20,color:"red",fillColor:"red"})),e.gameObjects.gameplay.push(t);var i=new c({variant:c.VARIANT.TEXT,x:30,y:37.5,name:"turn_indicator"});i.addShape(new m("text",{x:0,y:0,text:"Player:",font:"30px Consolas",color:"white"})),e.gameObjects.gameplay.push(i)}(this),function(e){var t=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-30,y:30,name:"continue_button",outline:{top:20,left:20,bottom:20,right:20}});t.addShape(new m("rectangle",{x:-20,y:-20,width:40,height:40,color:"red"})),t.addShape(new m("polygon",{points:[{x:-10,y:-10},{x:10,y:0},{x:-10,y:10}],color:"red",fillColor:"red"})),e.gameObjects.paused.push(t);var i=new c({variant:c.VARIANT.BUTTON,x:e.displayData.gameWidth-80,y:30,name:"stop_button",outline:{top:20,left:20,bottom:20,right:20}});i.addShape(new m("rectangle",{x:-20,y:-20,width:40,height:40,color:"red"})),i.addShape(new m("rectangle",{x:-10,y:-10,width:20,height:20,color:"red",fillColor:"red"})),e.gameObjects.paused.push(i);var n=new c({variant:c.VARIANT.TEXT,x:e.displayData.gameWidth/2,y:e.displayData.gameHeight/2,name:"pause_text"});n.addShape(new m("text",{x:-150,y:0,text:"Game Paused",font:"50px Consolas",color:"white"}));var a=new m("line",{x:-150,y:5,x2:150,y2:5,color:"white",lineWidth:4});a.addAnimation(new h({duration:1e3,loop:h.INFINITE})),n.addShape(a),e.gameObjects.paused.push(n)}(this),b(this),this.start()},[{key:"updateConfig",value:function(){var e=this.state.boardSize;this.config={boardSize:e,boardMargin:60,cellWidth:680/e,cellHeight:680/e,cellPadding:20}}},{key:"resetState",value:function(){this.state.occupiedSpaces=0,this.state.gameOver=!1}},{key:"start",value:function(){var t=this;e(this.ctx,this.displayData),window.requestAnimationFrame(function(e){return t.gameLoop(e)})}},{key:"gameLoop",value:function(e){var t,i,n=this;!function(e,t){t.deltaTime=e-t.lastTime,t.lastTime=e,t.fps.accum+=Math.floor(1e3/t.deltaTime),t.fps.frames++,t.fps.frames>=60&&(t.fps.avg=Math.floor(t.fps.accum/t.fps.frames),t.fps.accum=0,t.fps.frames=0)}(e,this.frameData),this.state.gameOver||2!=this.state.currentPlayer||this.state.opponentType!==D.CPU?_(this):E(this),this.gameObjects[this.mode].forEach(function(e){e.update(n.frameData.deltaTime)}),t=this.ctx,i=this.displayData,t.clearRect(i.screenStartX,i.screenStartY,i.gameWidth+2*i.offsetX,i.gameHeight+2*i.offsetY),this.gameObjects[this.mode].forEach(function(e){e.draw(n.ctx)}),window.requestAnimationFrame(function(e){return n.gameLoop(e)})}}])}();window.onload=function(){var e=document.getElementById("gameCanvas");new k(e)}})();